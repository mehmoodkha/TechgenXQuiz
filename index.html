<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevOps Mastery Hub | SRE Interview Prep</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        [x-cloak] { display: none !important; }
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: #f8fafc; overflow-x: hidden; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .code-font { font-family: 'JetBrains Mono', monospace; }
        .gradient-text { background: linear-gradient(135deg, #10b981 0%, #0ea5e9 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-slide-up { animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .topic-card:hover .icon-box { transform: scale(1.1) rotate(5deg); }
    </style>
</head>
<body x-data="devopsApp()" x-init="init()" class="selection:bg-emerald-500/30">

    <!-- Header -->
    <header class="sticky top-0 z-50 glass border-b border-slate-800/50">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div @click="setView('dashboard')" class="flex items-center gap-3 cursor-pointer group">
                <div class="w-11 h-11 rounded-xl bg-emerald-500 flex items-center justify-center shadow-lg shadow-emerald-500/20 group-hover:rotate-3 transition-transform">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-950" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                </div>
                <div class="flex flex-col">
                    <span class="text-xl font-black tracking-tighter uppercase leading-none">DevOps<span class="text-emerald-500">Hub</span></span>
                    <span class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mt-1">SRE Interview Mastery</span>
                </div>
            </div>
            
            <div class="flex items-center gap-6">
                <div class="hidden md:flex items-center gap-3 px-4 py-2 rounded-2xl bg-slate-900/50 border border-slate-800">
                    <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest" x-text="masteryCount + ' Concepts Mastered'"></span>
                </div>
                <button class="w-10 h-10 rounded-full border border-slate-700 bg-slate-800 flex items-center justify-center hover:bg-slate-700 transition-colors">
                    <span class="text-xs font-black">JD</span>
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-12">
        
        <!-- Dashboard View -->
        <div x-show="view === 'dashboard'" x-transition class="space-y-16 animate-slide-up">
            <section class="relative p-10 md:p-20 rounded-[3rem] bg-slate-900 border border-slate-800 overflow-hidden shadow-2xl">
                <div class="absolute -top-24 -right-24 w-96 h-96 bg-emerald-500/10 blur-[120px] rounded-full"></div>
                <div class="absolute -bottom-24 -left-24 w-64 h-64 bg-blue-500/5 blur-[100px] rounded-full"></div>
                
                <div class="relative z-10 text-center md:text-left">
                    <h1 class="text-5xl md:text-8xl font-black mb-8 tracking-tighter leading-[0.9]">
                        Engineer your <br/><span class="gradient-text">Dream Career</span>
                    </h1>
                    <p class="text-slate-400 text-lg md:text-xl max-w-2xl leading-relaxed mb-12 mx-auto md:mx-0">
                        The definitive preparation engine for SRE, DevOps, and Platform Engineering interviews. Structured learning paths with AI-powered coaching.
                    </p>
                    <div class="flex flex-wrap justify-center md:justify-start gap-4">
                        <template x-for="tech in ['AWS', 'K8s', 'Terraform', 'Linux', 'CI/CD']">
                            <span class="px-6 py-3 rounded-2xl bg-slate-950 border border-slate-800 text-sm font-bold text-slate-300" x-text="tech"></span>
                        </template>
                    </div>
                </div>
            </section>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <template x-for="topic in topics" :key="topic.id">
                    <div @click="selectTopic(topic)" 
                         class="topic-card group cursor-pointer p-8 rounded-[2.5rem] bg-slate-900 border border-slate-800 hover:border-emerald-500/30 hover:shadow-2xl transition-all duration-500">
                        <div :class="'icon-box w-16 h-16 rounded-2xl flex items-center justify-center mb-8 transition-all duration-500 bg-' + topic.color + '/10 text-' + topic.color" x-html="topic.icon"></div>
                        <h3 class="text-2xl font-bold mb-3 tracking-tight" x-text="topic.name"></h3>
                        <p class="text-slate-500 text-sm leading-relaxed mb-10 h-10 overflow-hidden" x-text="topic.description"></p>
                        <div class="flex items-center justify-between">
                            <span class="text-[10px] font-black text-emerald-500 uppercase tracking-[0.2em]">Start Training</span>
                            <div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-emerald-500 group-hover:text-slate-950 transition-all duration-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <!-- Topic Detail View -->
        <div x-show="view === 'topicDetail'" x-transition class="max-w-4xl mx-auto animate-slide-up">
            <button @click="setView('dashboard')" class="flex items-center gap-2 text-slate-500 hover:text-white mb-12 transition-colors font-bold text-sm uppercase tracking-widest">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" /></svg>
                Back to Dashboard
            </button>
            
            <div class="flex items-center gap-8 mb-16">
                <div :class="'w-24 h-24 rounded-3xl flex items-center justify-center bg-' + selectedTopic?.color + '/10 text-' + selectedTopic?.color" x-html="selectedTopic?.icon"></div>
                <div>
                    <h2 class="text-6xl font-black tracking-tighter" x-text="selectedTopic?.name"></h2>
                    <p class="text-slate-400 text-xl" x-text="selectedTopic?.description"></p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <template x-for="level in ['Basic', 'Intermediate', 'Advanced']">
                    <button @click="startQuiz(level)" 
                            class="p-10 rounded-[2.5rem] bg-slate-900 border border-slate-800 text-left hover:border-emerald-500/50 transition-all group relative overflow-hidden">
                        <div class="text-emerald-500 text-[10px] font-black uppercase tracking-[0.3em] mb-6" x-text="level"></div>
                        <h4 class="text-2xl font-bold mb-4 tracking-tight">Core Curriculum</h4>
                        <p class="text-slate-500 text-sm mb-10 leading-relaxed">System design and implementation patterns for <span x-text="level.toLowerCase()"></span> mastery.</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs font-bold text-slate-300">15 Questions</span>
                            <div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-emerald-500 group-hover:text-slate-950 transition-all shadow-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 11 7.293 7.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </div>
                        </div>
                    </button>
                </template>
            </div>
        </div>

        <!-- Quiz View -->
        <div x-show="view === 'quiz'" x-transition class="max-w-3xl mx-auto animate-slide-up" x-cloak>
            <div class="flex items-center justify-between mb-10">
                <button @click="setView('topicDetail')" class="text-slate-500 hover:text-white transition-colors font-bold text-xs uppercase tracking-widest flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg> Terminate Session
                </button>
                <div class="text-right">
                    <div class="text-[10px] font-black uppercase tracking-[0.2em] text-emerald-500 mb-1" x-text="selectedTopic?.name + ' ‚Ä¢ ' + selectedLevel"></div>
                    <div class="text-slate-500 text-xs font-bold" x-text="'QUESTION ' + (currentIndex + 1) + ' OF ' + currentQuestions.length"></div>
                </div>
            </div>

            <div class="w-full h-1.5 bg-slate-900 rounded-full mb-12 overflow-hidden shadow-inner">
                <div class="h-full bg-emerald-500 transition-all duration-700 ease-out" :style="'width: ' + (((currentIndex + 1) / currentQuestions.length) * 100) + '%'"></div>
            </div>

            <div class="bg-slate-900 border border-slate-800 rounded-[3rem] p-10 md:p-16 shadow-2xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-emerald-500/5 blur-[80px]"></div>
                
                <h2 class="text-3xl md:text-4xl font-bold leading-tight mb-12 tracking-tight" x-text="currentQuestions[currentIndex]?.text"></h2>
                
                <template x-if="currentQuestions[currentIndex]?.code">
                    <div class="mb-12 rounded-2xl bg-slate-950 border border-slate-800/50 p-8 shadow-inner overflow-x-auto">
                        <pre class="code-font text-sm text-emerald-400 leading-relaxed"><code x-text="currentQuestions[currentIndex]?.code"></code></pre>
                    </div>
                </template>

                <div class="space-y-10">
                    <template x-if="!showAnswer">
                        <button @click="showAnswer = true" 
                                class="w-full py-6 bg-emerald-600 hover:bg-emerald-500 text-slate-950 font-black text-xl rounded-2xl transition-all shadow-xl shadow-emerald-500/20 active:scale-[0.98]">
                            Reveal Engineering Solution
                        </button>
                    </template>

                    <template x-if="showAnswer">
                        <div class="space-y-10 animate-slide-up">
                            <div class="p-10 rounded-[2rem] bg-slate-800/30 border border-slate-700/50 backdrop-blur-sm">
                                <h4 class="text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] mb-6">Expert Rationale</h4>
                                <p class="text-slate-200 text-xl leading-relaxed font-medium" x-text="currentQuestions[currentIndex]?.answer"></p>
                                
                                <div class="mt-10 flex gap-4">
                                    <button @click="getAIExplanation()" 
                                            :disabled="loadingAI"
                                            class="flex-1 flex items-center justify-center gap-3 px-8 py-4 bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 rounded-2xl hover:bg-indigo-500/20 transition-all font-bold text-sm disabled:opacity-50 shadow-lg">
                                        <svg x-show="!loadingAI" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                                        <svg x-show="loadingAI" class="animate-spin h-5 w-5 text-indigo-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                                        <span x-text="loadingAI ? 'CONSULTING GEMINI AI...' : 'AI ARCHITECTURE DEEP-DIVE'"></span>
                                    </button>
                                </div>
                            </div>

                            <template x-if="aiExplanation">
                                <div class="p-10 rounded-[2rem] bg-slate-950 border border-slate-800 text-slate-300 text-sm leading-relaxed whitespace-pre-wrap animate-slide-up shadow-inner border-l-4 border-l-indigo-500" x-html="aiExplanation"></div>
                            </template>

                            <button @click="nextQuestion()" 
                                    class="w-full py-6 bg-slate-800 hover:bg-slate-700 text-white font-black text-lg rounded-2xl transition-all flex items-center justify-center gap-4 active:scale-[0.98] shadow-2xl">
                                <span x-text="currentIndex < currentQuestions.length - 1 ? 'Concept Mastered & Next' : 'Complete Session'"></span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd" /></svg>
                            </button>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </main>

    <script>
        function devopsApp() {
            return {
                view: 'dashboard',
                topics: [
                    { id: 'linux', name: 'Linux Mastery', color: 'emerald-500', description: 'Kernel internals, shell scripting, and resource troubleshooting.', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>' },
                    { id: 'k8s', name: 'Kubernetes', color: 'blue-500', description: 'Orchestration, pod scheduling, and cluster networking.', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>' },
                    { id: 'cloud', name: 'Cloud Architecture', color: 'sky-500', description: 'High availability design, IAM, and global infrastructure.', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" /></svg>' },
                    { id: 'iac', name: 'Terraform & IaC', color: 'purple-500', description: 'Immutable infrastructure, state files, and provider logic.', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" /></svg>' },
                    { id: 'cicd', name: 'CI/CD Pipelines', color: 'orange-500', description: 'Jenkins, GitLab CI, and deployment strategies.', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>' },
                    { id: 'sre', name: 'SRE Practices', color: 'indigo-500', description: 'SLIs/SLOs, Error Budgets, and Incident Management.', icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>' }
                ],
                selectedTopic: null,
                selectedLevel: null,
                currentIndex: 0,
                showAnswer: false,
                loadingAI: false,
                aiExplanation: '',
                masteryCount: Alpine.$persist(0),
                currentQuestions: [],

                init() {
                    console.log("DevOps Mastery Hub SPA initialized.");
                },

                setView(view) {
                    this.view = view;
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                },

                selectTopic(topic) {
                    this.selectedTopic = topic;
                    this.setView('topicDetail');
                },

                startQuiz(level) {
                    this.selectedLevel = level;
                    // Mock questions representing what would be served from Django Question model
                    this.currentQuestions = this.getMockQuestions(this.selectedTopic.id, level);
                    this.currentIndex = 0;
                    this.showAnswer = false;
                    this.aiExplanation = '';
                    this.setView('quiz');
                },

                async getAIExplanation() {
                    this.loadingAI = true;
                    this.aiExplanation = '';
                    try {
                        const response = await fetch('/api/explain/', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                topic: this.selectedTopic.name,
                                question: this.currentQuestions[this.currentIndex].text,
                                answer: this.currentQuestions[this.currentIndex].answer
                            })
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            this.aiExplanation = data.explanation;
                        } else {
                            // Fallback for preview if server isn't running
                            this.aiExplanation = "### üîç Deep Dive\nThis concept is fundamental to high-availability systems. It involves decoupling services to ensure resilience against localized failures.\n\n### üèóÔ∏è Real-World Scenario\nImagine a distributed database cluster where one node fails; this mechanism handles the failover automatically without manual intervention.\n\n### üí° Interview Pro-Tip\nmention the 'Blast Radius' and 'MTTR' (Mean Time To Recovery) to show seniority.";
                        }
                    } catch (e) {
                        this.aiExplanation = "The AI Deep Dive requires the Django backend service to be active. In production, this uses Gemini 3 Flash to provide real-time architectural coaching.";
                    } finally {
                        this.loadingAI = false;
                    }
                },

                nextQuestion() {
                    if (this.currentIndex < this.currentQuestions.length - 1) {
                        this.currentIndex++;
                        this.showAnswer = false;
                        this.aiExplanation = '';
                        this.masteryCount++;
                    } else {
                        this.masteryCount++;
                        this.setView('dashboard');
                    }
                },

                getMockQuestions(topicId, level) {
                    const data = {
                        'linux': [
                            { text: 'How do you troubleshoot a process that is stuck in an Uninterruptible Sleep (D) state?', answer: 'D state indicates a process is waiting for I/O (usually disk or network). You cannot kill it. Troubleshoot by checking iostat for disk latency or dmesg for kernel errors related to hardware.', code: 'ps aux | awk \'$8=="D" {print $0}\'\n# Check disk IO wait\niostat -xz 1' },
                            { text: 'Explain the difference between a hard link and a symbolic link.', answer: 'A hard link points to the same inode as the original file. A symlink is a separate file that contains the path to the original. Hard links cannot cross filesystems.', code: 'ln source.txt hardlink.txt\nln -s source.txt symlink.txt' }
                        ],
                        'k8s': [
                            { text: 'What is a Pod Disruption Budget (PDB)?', answer: 'A PDB limits the number of Pods of a replicated application that are down simultaneously from voluntary disruptions (e.g., node drains for upgrades). It ensures high availability during maintenance.', code: 'apiVersion: policy/v1\nkind: PodDisruptionBudget\nspec:\n  minAvailable: 2' }
                        ],
                        'iac': [
                            { text: 'Explain Terraform State locking.', answer: 'State locking prevents two team members from running terraform apply simultaneously, which could corrupt the state file. S3 with DynamoDB is the standard for AWS environments.', code: 'terraform {\n  backend "s3" {\n    dynamodb_table = "terraform-lock"\n  }\n}' }
                        ]
                    };
                    return data[topicId] || [
                        { text: `What are the core design patterns for ${level} ${this.selectedTopic.name}?`, answer: `Focus on horizontal scaling, automated failure detection, and declarative configuration management.` },
                        { text: `How do you measure success in a ${this.selectedTopic.name} deployment?`, answer: "Monitor latency, traffic, errors, and saturation (The Four Golden Signals)." }
                    ];
                }
            };
        }
    </script>
</body>
</html>